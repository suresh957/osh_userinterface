/*! production 08-05-2018 */

angular.module("newapp").controller("LoginCtrl",["$scope","$http","$location","$route","resturl",function(o,e,a,t,n){o.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],o.isDisabled=!1,o.redirect=function(t){o.isDisabled=!0,console.log(t),e.post(n+"/user/login",t).then(function(e){1==e.data.success?(localStorage.setItem("loggedInUser",t.userName),console.log(localStorage.getItem("loggedInUser")),a.path("/dashboard"),o.title=e.data.name,console.log(o.title),localStorage.setItem("loggedInUserName",o.title),o.userType=e.data.type,localStorage.setItem("loggedInUserType",o.userType),localStorage.setItem("loggedInuserId",e.data.userId)):0==e.data.success&&(o.errmsg=!0,o.errmessage=e.data.errorMessage,o.session.password="",o.isDisabled=!1,a.path("/login"))})},o.alerthide=function(){o.errmsg=!1},e.get(n+"/getAllCategories").then(function(e){console.log(e),o.menuitem=e.data.categoryData}),e.get(n+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),o.cartlist=e.data,o.cartCode=e.data.code,console.log(o.cartlist),o.totalprice=e.data.total,console.log(o.lengthofcart),null==e.data.shoppingCartItems?o.lengthofcart=0:o.lengthofcart=e.data.shoppingCartItems.length}),jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("vendorlogCtrl",["$scope","$http","$location","$route","resturl",function(o,e,a,t,n){o.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],o.isDisabled=!1,o.vendorlog=function(t){o.isDisabled=!0,console.log(t),e.post(n+"/user/login",t).then(function(e){1==e.data.success?(localStorage.setItem("loggedInUser",t.userName),console.log(localStorage.getItem("loggedInUser")),a.path("/dashboard"),o.title=e.data.name,console.log(o.title),localStorage.setItem("loggedInUserName",o.title),o.userType=e.data.type,localStorage.setItem("loggedInUserType",o.userType),localStorage.setItem("loggedInuserId",e.data.userId)):0==e.data.success&&(o.errmsg=!0,o.errmessage=e.data.errorMessage,o.vlogin.password="",o.isDisabled=!1,a.path("/vendorlogin"))})},o.alerthide=function(){o.errmsg=!1},e.get(n+"/getAllCategories").then(function(e){console.log(e),o.menuitem=e.data.categoryData}),o.mouseOver=function(e){o.set_bg=function(){return o.bgimg=e.imageURL,{"background-image":"url(/clients/onesevenhome/img/"+o.bgimg+".jpg)"}}},e.get(n+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),o.cartlist=e.data,o.cartCode=e.data.code,console.log(o.cartlist),o.totalprice=e.data.total,console.log(o.lengthofcart),null==e.data.shoppingCartItems?o.lengthofcart=0:o.lengthofcart=e.data.shoppingCartItems.length})}]),angular.module("newapp").controller("RegistrationCtrl",["$scope","$http","$location","$route","resturl","$rootScope",function(t,o,a,e,n,r){t.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],o.get(n+"/getAllCategories").then(function(e){console.log(e),t.menuitem=e.data.categoryData}),t.isDisabled=!1,t.alerthide=function(){t.errmsg=!1},t.register=function(e){t.isDisabled=!0,r.firstName=e.firstName,r.lastName=e.lastName,r.usertype=e.userType,e.activationURL="http://onesevenhome.com/#/activateuser",o.post(n+"/customer/register",e).then(function(e){"true"==e.data.status?a.path("/conform"):(t.errmsg=!0,t.isDisabled=!1,a.path("/registration"),t.errmessage=e.data.errorMessage)})},o.get(n+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),t.cartlist=e.data,t.cartCode=e.data.code,console.log(t.cartlist),t.totalprice=e.data.total,console.log(t.lengthofcart),null==e.data.shoppingCartItems?t.lengthofcart=0:t.lengthofcart=e.data.shoppingCartItems.length}),jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("vendorregCtrl",["$scope","$http","$location","$route","resturl","$rootScope",function(n,t,r,e,o,l){function a(a){n.isDisabled=!0,console.log(a),l.vendorName=a.companyName,l.usertype=a.userType,a.activationURL="http://rainiersoft.com/clients/onesevenhome/#/activateuser",t({method:"POST",url:o+"/user/register",headers:{"Content-Type":void 0},transformRequest:function(e){var t=new FormData;if(t.append("vendorRequest",JSON.stringify(a)),0==e.file.length)t.append("file",new File([""],"emptyFile.jpg",{type:"impage/jpeg"}));else for(var o=0;o<e.file.length;o++)t.append("file",e.file[o]);return t},data:{fileInfo:a,file:n.files}}).success(function(e,t,o,a){console.log(e),console.log(e.status),"true"==e.status?r.path("/conform"):(n.errmsg=!0,n.isDisabled=!1,r.path("/vendorreg"),n.errmessage=e.errorMessage)}).error(function(e,t,o,a){r.path("/vendorreg")})}t.get(o+"/getAllCategories").then(function(e){console.log(e),n.menuitem=e.data.categoryData}),n.isDisabled=!1,n.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],n.mouseOver=function(e){n.set_bg=function(){return n.bgimg=e.imageURL,{"background-image":"url(/clients/onesevenhome/img/"+n.bgimg+".jpg)"}}},n.alerthide=function(){n.errmsg=!1},t.get(o+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),n.cartlist=e.data,console.log(n.cartlist),null==e.data.shoppingCartItems?n.lengthofcart=0:n.lengthofcart=e.data.shoppingCartItems.length}),n.files=[],n.$on("seletedFile",function(e,t){n.$apply(function(){n.files.push(t.file)})}),n.example8model=[],n.example8settings={checkBoxes:!0,enableSearch:!0},n.constitutionchange=function(e){if("Services"==e)t.get(o+"/services").then(function(e){for(var t=e.data.services,o=0;o<t.length;o++)delete t[o][".imageURL1"],delete t[o][".imageURL2"],delete t[o][".description"],delete t[o][".new"],t[o].label=t[o][".serviceType"],delete t[o][".serviceType"];n.example8data=t,n.example8model=[n.example8data[0]]});else if("Architects"==e){t.post(o+"/getCategoriesForCat",{searchString:"Architects"}).then(function(e){n.menuitems=angular.copy(e.data.categoryData);var t=n.menuitems[0].subCategory;console.log(t);for(var o=0;o<t.length;o++)delete t[o][".type"],t[o].label=t[o][".title"],delete t[o][".title"],n.example8data=t,n.example8model=[n.example8data[0]],console.log(n.example8data)})}else"Machinery"==e?(n.catpayload={searchString:"MACHINERY & EQUIPMENT"},t.post(o+"/getCategoriesForCat",n.catpayload).then(function(e){n.menuitems=angular.copy(e.data.categoryData);var t=n.menuitems[0].subCategory;console.log(t);for(var o=0;o<t.length;o++)delete t[o][".type"],t[o].label=t[o][".title"],delete t[o][".title"],n.example8data=t,n.example8model=[n.example8data[0]],console.log(n.example8data)})):"Wallpaper"==e&&(n.catpayload={searchString:"WALL PAPER"},t.post(o+"/getCategoriesForCat",n.catpayload).then(function(e){n.menuitems=angular.copy(e.data.categoryData);var t=n.menuitems[0].subCategory;console.log(t);for(var o=0;o<t.length;o++)delete t[o][".type"],t[o].label=t[o][".title"],delete t[o][".title"],n.example8data=t,n.example8model=[n.example8data[0]],console.log(n.example8data)}))},n.regvendor=function(e){e.userType="VENDOR",n.vendor.country="India",e.constFirm=e.vendorConstFirm,delete e.vendorConstFirm,console.log(e),a(e)},n.Arcvendor=function(e){e.userType="ARCHITECTS",n.vendor.country="India",e.constFirm=e.vendorConstFirm,delete e.vendorConstFirm,console.log(e);var t=[];for(i=0;i<n.example8model.length;i++)t.push(n.example8model[i].id);e.architectIds=t,console.log(n.example8model),console.log(e),a(e)},n.Machineryvendor=function(e){e.userType="MACHINERY & EQUIPMENT",n.vendor.country="India",e.constFirm=e.vendorConstFirm,delete e.vendorConstFirm,console.log(e);var t=[];for(i=0;i<n.example8model.length;i++)t.push(n.example8model[i].id);e.architectIds=t,console.log(n.example8model),console.log(e),a(e)},n.wallpapervendor=function(e){e.userType="WALL PAPER",n.vendor.country="India",e.constFirm=e.vendorConstFirm,delete e.vendorConstFirm,console.log(e);var t=[];for(i=0;i<n.example8model.length;i++)t.push(n.example8model[i].id);e.architectIds=t,console.log(n.example8model),a(e)},n.regservices=function(e){e.userType="SERVICE",n.vendor.country="India",e.constFirm=e.vendorConstFirm,delete e[".vendorConstFirm"];var t=[];for(i=0;i<n.example8model.length;i++)t.push(n.example8model[i].id);e.serviceIds=t,console.log(n.example8model),console.log(e),a(e)},jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),newapp.directive("uploadFiles",function(){return{scope:!0,link:function(a,e,t){e.bind("change",function(e){for(var t=e.target.files,o=0;o<t.length;o++)a.$emit("seletedFile",{file:t[o]})})}}}),angular.module("newapp").controller("forgetPassCtrl",["$scope","$http","$location","resturl",function(t,o,e,a){t.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],o.get("http://103.92.235.45/shop/getAllCategories").then(function(e){console.log(e),t.menuitem=e.data.categoryData}),t.mouseOver=function(e){t.set_bg=function(){return t.bgimg=e.imageURL,{"background-image":"url(/clients/onesevenhome/img/"+t.bgimg+".jpg)"}}},o.get(a+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),t.cartlist=e.data,console.log(t.cartlist),null!=e.data.shoppingCartItems?(t.lengthofcart=e.data.shoppingCartItems.length,console.log(t.lengthofcart)):t.lengthofcart=0}),t.alerthide=function(){t.errmsg=!1},t.forget=function(e){console.log(e),e.forgotPwdURL="http://onesevenhome.com/#/newpassword",o.post(a+"/user/resetpwd",e).then(function(e){null==e.data.errorMessage?(console.log(e.data.errorMessage),t.errmsg=!0,t.errmessage=e.data.successMessage):(t.errmsg=!0,t.errmessage=e.data.errorMessage)})},jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("newPassCtrl",["$scope","$http","$location","$routeParams","resturl",function(t,o,a,n,r){t.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],o.get(r+"/getAllCategories").then(function(e){console.log(e),t.menuitem=e.data.categoryData}),t.lengthofcart=0,console.log(t.lengthofcart),t.alerthide=function(){t.errmsg=!1},t.isDisabled=!1,t.newpassword=function(e){t.isDisabled=!0,e.ofid=n.ofid,e.email=n.email,console.log(e),o.post(r+"/user/updatepwd",e).then(function(e){console.log(e),null==e.data.errorMessage?a.path("/login"):(t.errmsg=!0,t.isDisabled=!1,a.path("/newpassword"),t.errmessage=e.data.errorMessage)})},jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("DashboardCtrl",["$scope","$http","$location","$interval","resturl","$rootScope",function(l,o,a,n,r,s){null!=localStorage.loggedInUser?(l.loggedInUser=localStorage.loggedInUser,l.loggedInUserName=localStorage.loggedInUserName,l.loggedInUserType=localStorage.loggedInUserType,l.loggedInuserId=localStorage.loggedInuserId,l.userlogged=!0):l.userlogged=!1,l.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],l.mouseOver=function(e){l.set_bg=function(){return l.bgimg=e.imageURL,{"background-image":"url(/clients/onesevenhome/img/"+l.bgimg+".jpg)"}}},l.logout=function(){localStorage.clear(),a.path("/login")},l.myProfile=function(){a.path("/myaccount")},l.topslides=[{img1:"img/Hero-Banners-Hall-530x922_1.jpg",img2:"img/Hero-Banners-kitchen-265x926_1.jpg",img3:"img/Hero-Banners-bedroom-265x926_1.jpg"},{img1:"img/Hero-Banners-Hall-530x922_2.jpg",img2:"img/Hero-Banners-kitchen-265x926_2.jpg",img3:"img/Hero-Banners-bedroom-265x926_3.jpg"},{img1:"img/Hero-Banners-Hall-530x922_3.jpg",img2:"img/Hero-Banners-kitchen-265x926_3.jpg",img3:"img/Hero-Banners-bedroom-265x926_3.jpg"},{img1:"img/Hero-Banners-Hall-530x922_4.jpg",img2:"img/Hero-Banners-kitchen-265x926_4.jpg",img3:"img/Hero-Banners-bedroom-265x926_4.jpg"}],l.slicktopslideConfig={dots:!0,arrows:!1,infinite:!0,autoplay:!0,autoplayspeed:1e3},o.get(r+"/getAllCategories").then(function(e){console.log(e),l.menuitem=e.data.categoryData}),o.get(r+"/getDealOfDay").then(function(e){console.log("deal",e),l.dealday=e.data.dealOfDay;var t=[];for(abc=0;abc<e.data.dealOfDay.length;abc++)t[abc]="display"+abc;for(i=0;i<e.data.dealOfDay.length;i++)null==e.data.responseData[i].discountPercentage||null==e.data.responseData[i].discountPercentage?(l.showTag=t[i],l[l.showTag]=!1):(l.showTag=t[i],l[l.showTag]=!0);if(null!=e.data.dealOfDay&&null!=e.data.dealOfDay&&null!=e.data.dealOfDay.productPriceSpecialStartDate&&null!=e.data.dealOfDay.productPriceSpecialStartDate){var o=new Date(e.data.dealOfDay.productPriceSpecialStartDate);o.setDate(o.getDate()+1);var a=o.getMonth()+1+"/"+o.getDate()+"/"+o.getFullYear(),r=new Date(a).getTime();n(function(){var e=(new Date).getTime(),t=r-e;l.hours=Math.floor(t%864e5/36e5),l.minutes=Math.floor(t%36e5/6e4),l.seconds=Math.floor(t%6e4/1e3);var o=Math.log(l.hours)*Math.LOG10E+1|0,a=Math.log(l.minutes)*Math.LOG10E+1|0,n=Math.log(l.seconds)*Math.LOG10E+1|0;o<2&&(l.hours="0"+l.hours),a<2&&(l.minutes="0"+l.minutes),n<2&&(l.seconds="0"+l.seconds)},1e3)}}),o.get(r+"/getNewProduct").then(function(e){console.log(e),l.products=e.data.newProducts,l.NewproductsLoaded=!0,l.slicknewproductsConfig={dots:!0,arrows:!1,infinite:!0,slidesToShow:2,slidesToScroll:1};var t=[];for(abc=0;abc<e.data.newProducts.length;abc++)t[abc]="display"+abc;for(i=0;i<e.data.newProducts.length;i++)console.log(e.data.newProducts[i].discountPercentage),"0"==e.data.newProducts[i].discountPercentage||null==e.data.newProducts[i].discountPercentage?(l.showTag=t[i],l[l.showTag]=!1):(l.showTag=t[i],l[l.showTag]=!0)}),o.get(r+"/getRecommendedProduct").then(function(e){for(console.log("recommend",e),l.recommend=e.data.recommendedProducts,i=0;i<e.data.recommendedProducts.length;i++)console.log(e.data.recommendedProducts[i].productDiscountPrice),null==e.data.recommendedProducts[i].productDiscountPrice?(l.productprce=!0,l.produdsctprice=!1):(l.productprce=!1,l.produdsctprice=!0);l.RecomendLoaded=!0,l.slickrecommendedprocutsConfig={dots:!1,arrows:!0,infinite:!0,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:1024,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:3,slidesToScroll:1}},{breakpoint:800,settings:{arrows:!1,centerMode:!0,centerPadding:"0px",slidesToShow:3,slidesToScroll:1}},{breakpoint:767,settings:{arrows:!1,centerMode:!0,centerPadding:"0px",slidesToShow:2,slidesToScroll:1}},{breakpoint:500,settings:{arrows:!1,centerMode:!0,centerPadding:"0px",slidesToShow:1,slidesToScroll:1}}]}}),o.get(r+"/getFeatureProduct").then(function(e){console.log(e),l.feature=e.data.feaureProducts,l.FeaturedLoaded=!0,l.slickfeatureproductsConfig={dots:!0,arrows:!1,infinite:!0,slidesToShow:2,slidesToScroll:1}}),o.get(r+"/services").then(function(e){console.log(e),l.deal=e.data.services,l.SreviceLoaded=!0,l.slickServiceConfig={dots:!1,arrows:!1,infinite:!0,slidesToShow:3,slidesToScroll:3,autoplay:!0,autoplayspeed:600}}),o.get("js/controllers/whatwedo.json").then(function(e){console.log(e),l.whatWeDoResp=e.data.whatWeDoResponse,l.getProdImgPath=e.data.whatWeDoResponse[0].imageURL1,l.serviceDescription=e.data.whatWeDoResponse[0].description}),o.get(r+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),l.cartlist=e.data,console.log(l.cartlist),null==e.data.shoppingCartItems?l.lengthofcart=0:l.lengthofcart=e.data.shoppingCartItems.length}),o.get(r+"/getAllSubCatImages").then(function(e){console.log("subcat",e),console.log(e),l.catImageData=e.data.subCatagoryImgsObjByCatagory,l.subCatagoryImgsLoaded=!0,l.slickSubCatConfig={dots:!1,arrows:!1,infinite:!1,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplayspeed:700}});var e={status:"Y"};o.post(r+"/getTestimonials",e).then(function(e){console.log("Testimonials",e),l.testimonialData=e.data.responseData}),o.post(r+"/getBrandImages",e).then(function(e){console.log("brands",e),l.brandData=e.data.responseData}),l.getDealDayPage=function(e){null!=e&&a.path("/productpage/"+e)},l.getSubCatPage=function(e,t){console.log(e),console.log(t),a.path("sub_category/"+e+"/categories/"+t.subCategoryName)},l.getProductServicePage=function(e,t){null!=e&&null!=e.productId&&t?a.path("productpage/"+e.productId):t||null==e||null==e.serviceType||a.path("detailservices/"+e.serviceType+"/"+e.id)},l.getProductImage=function(e){console.log(e),l.getProdImgPath=e.imageURL1,l.serviceDescription=e.description},0==l.userlogged?l.testmonialView=!1:l.testmonialView=!0,l.submitTestimonial=function(e){var t={customerId:l.loggedInuserId,testmonialDescription:e};console.log(t),o.post(r+"/testimonial/save",t).then(function(e){console.log(e),"true"==e.data.status?(l.success=e.data.successMessage,$(".successPopup").modal("show")):(l.failure=e.data.errorMessage,$(".errorPopup").modal("show")),testmonialDescription=""})},o.get(r+"/getHomePageOffers").then(function(e){console.log("HomePageOffers",e),l.offersData=e.data.responseData}),l.getNotifications=function(e){console.log(e);var t={emailAddress:e};o.post(r+"/saveExternalUser",t).then(function(e){console.log(e),s.subscriptionData={},s.subscriptionData=e.data,a.path("/subscribed")})},jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("ContactCtrl",["$scope","http","$location","resturl",function(t,e,o,a){t.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],null!=localStorage.loggedInUser?(t.loggedInUser=localStorage.loggedInUser,t.loggedInUserName=localStorage.loggedInUserName,t.userlogged=!0):t.userlogged=!1,t.logout=function(){localStorage.clear(),o.path("/login")},t.myProfile=function(){o.path("/myaccount")},e.get(a+"/getAllCategories").then(function(e){console.log(e),t.menuitem=e.data.categoryData}),e.get(a+"/getContactUS").then(function(e){console.log(e),t.contactdetails=e.data}),e.get(a+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),t.cartlist=e.data,console.log(t.cartlist),null==e.data.shoppingCartItems?t.lengthofcart=0:t.lengthofcart=e.data.shoppingCartItems.length}),jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("ServicesCtrl",["$scope","$http","$location","resturl",function(t,e,o,a){t.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],null!=localStorage.loggedInUser?(t.loggedInUser=localStorage.loggedInUser,t.loggedInUserName=localStorage.loggedInUserName,t.userlogged=!0):t.userlogged=!1,1==t.userlogged?(t.logout=function(){localStorage.clear(),o.path("/login")},t.mouseOver=function(e){t.set_bg=function(){return t.bgimg=e.imageURL,{"background-image":"url(/clients/onesevenhome/img/"+t.bgimg+".jpg)"}}},t.myProfile=function(){o.path("/myaccount")},e.get(a+"/getAllCategories").then(function(e){console.log(e),t.menuitem=e.data.categoryData}),e.get(a+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),t.cartlist=e.data,console.log(t.cartlist),null==e.data.shoppingCartItems?t.lengthofcart=0:t.lengthofcart=e.data.shoppingCartItems.length})):o.path("/login"),e.get(a+"/services").then(function(e){console.log(e),t.deal=e.data.services}),jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("DetailservicesCtrl",["$scope","$http","$routeParams","$location","resturl",function(r,l,s,i,c){r.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],null!=localStorage.loggedInUser?(r.loggedInUser=localStorage.loggedInUser,r.loggedInUserName=localStorage.loggedInUserName,r.loggedInUserType=localStorage.loggedInUserType,r.loggedInuserId=localStorage.loggedInuserId,r.userlogged=!0):r.userlogged=!1,r.mouseOver=function(e){r.set_bg=function(){return r.bgimg=e.imageURL,{"background-image":"url(/clients/onesevenhome/img/"+r.bgimg+".jpg)"}}},r.serveshow=!1,r.logout=function(){localStorage.clear(),i.path("/login")},r.myProfile=function(){i.path("/myaccount")},r.id=s.serviceid,console.log(s.serviceid),r.selectedtype=s.sid,l.get(c+"/getAllCategories").then(function(e){console.log(e),r.menuitem=e.data.categoryData}),l.get(c+"/services").then(function(e){console.log(e),r.workers=e.data.services,$("#"+r.selectedtype).prop("checked",!0)}),l.get(c+"/services/"+s.sid+"/workers?pageNumber=1&pageSize=5").then(function(e){console.log(e),r.servicedetails=e.data.responseData,r.getStars=function(e){return parseFloat(e)/5*100+"%"},r.totalCount=e.data.paginationData.totalCount,$(".todaydeal-sorting label:contains("+r.selectedtype+")").prev().prop("checked",!0)}),r.page=1,r.detailsPagingAct=function(e,t,o){l.get(c+"/services/"+s.sid+"/workers?pageNumber="+e+"&pageSize=5").then(function(e){console.log(e),r.servicedetails=e.data.responseData,r.totalCount=e.data.paginationData.totalCount})},l.get(c+"/getRecommendedProduct").then(function(e){console.log(e),r.recommend=e.data.recommendedProducts,r.RecomendLoaded=!0,r.slickrecommendedprocutsConfig={dots:!1,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1}}),l.get(c+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),r.cartlist=e.data,console.log(r.cartlist),null==e.data.shoppingCartItems?r.lengthofcart=0:r.lengthofcart=e.data.shoppingCartItems.length}),r.updateSelection=function(e,t,o,a,n){r.selectedtype==o?$("#"+r.selectedtype).prop("checked",!0):i.path("/detailservices/"+o+"/"+a)},r.onItemRating=function(e,t,o){console.log(e),console.log(t);var a={customerId:r.loggedInuserId,serviceId:t.id,serviceTypeId:s.serviceid,rating:e,reviewTitle:"",reviewDescription:""};console.log(a),l.post(c+"/servicerating/save",a).then(function(e){console.log(e),l.get(c+"/services/"+s.sid+"/workers?pageNumber=1&pageSize=5").then(function(e){console.log(e),r.servicedetails=e.data.responseData,r.getStars=function(e){return parseFloat(e)/5*100+"%"},r.totalCount=e.data.paginationData.totalCount,$(".todaydeal-sorting label:contains("+r.selectedtype+")").prev().prop("checked",!0)})})},r.mechpopup=function(e){r.vendorName=e.companyName,r.customerName=r.loggedInUserName,r.id=e.id,$("#appointmentDate").datepicker({autoclose:!0,format:"yyyy-mm-dd"}),$(".bookNowPopup").modal("show")},r.ratebook=function(e){console.log(e),r.ratingpopup={rateid:e.id,ratingcumponey:e.companyName}},r.onItemRating=function(t,e,o){r.starValue=t,console.log(r.starValue),console.log(e);var a={customerId:r.loggedInuserId,serviceId:e.id,serviceTypeId:s.serviceid,rating:r.starValue,reviewDescription:"",reviewTitle:""};console.log(a),l.post(c+"/servicerating/save",a).then(function(e){console.log(e),t=r.starValue,t="0",1==e.data.status?(r.success=e.data.successMessage,$(".successPopup").modal("show")):(r.failure=e.data.errorMessage,$(".errorPopup").modal("show")),l.get(c+"/services/"+s.sid+"/workers?pageNumber=1&pageSize=5").then(function(e){console.log(e),r.servicedetails=e.data.responseData,r.getStars=function(e){return parseFloat(e)/5*100+"%"},r.totalCount=e.data.paginationData.totalCount,$(".todaydeal-sorting label:contains("+r.selectedtype+")").prev().prop("checked",!0)})})},r.searchVendor=function(e){console.log(e);var t={searchString:e,customerType:r.selectedtype};r.searchStr="",console.log(t),l.post(c+"/getServiceProvidersByLocation",t).then(function(e){console.log(e),null==e.data.paginationData&&(r.totalCount=0,r.servicedetails=""),r.servicedetails=e.data.responseData,null==e.data.responseData?(r.errorMsg=e.data.errorMsg,r.serveshow=!0):r.serveshow=!1,r.totalCount=e.data.paginationData.totalCount})},r.constitutionchange=function(e){console.log(e),r.serveshow=!1,"TopRated"==e&&(r.totalCount=0,l.get(c+"/services/"+s.sid+"/workers/toprated?pageNumber=1&pageSize=5").then(function(e){console.log(e),r.servicedetails=e.data.responseData,r.totalCount=e.data.paginationData.totalCount}),r.page=1,r.detailsPagingAct=function(e,t,o){l.get(c+"/services/"+s.sid+"/workers/toprated?pageNumber="+e+"&pageSize=5").then(function(e){console.log(e),r.servicedetails=e.data.responseData,r.totalCount=e.data.paginationData.totalCount})})},l.get(c+"/getUser/"+localStorage.loggedInuserId).then(function(e){console.log(e),"CUSTOMER"==localStorage.loggedInUserType?r.loggedInUserPincode=e.data.customerDetails.billing.postalCode:"SERVICE"==localStorage.loggedInUserType?r.loggedInUserPincode=e.data.serviceDetails.pinCode:r.loggedInUserPincode=e.data.vendorDetails.pinCode}),r.getProvidersByDistance=function(e){if(console.log(e,s.sid),console.log(r.loggedInUserPincode),""!=e){var t=e.split("-");console.log(t),l.get(c+"/services/"+s.sid+"/"+r.loggedInUserPincode+"/"+t[0]+"/"+t[1]+"?pageNumber=1&pageSize=5").then(function(e){console.log(e),null!=e.data.responseData?(r.serveshow=!1,r.servicedetails=e.data.responseData,r.getStars=function(e){return parseFloat(e)/5*100+"%"},r.totalCount=e.data.paginationData.totalCount,$(".todaydeal-sorting label:contains("+r.selectedtype+")").prev().prop("checked",!0)):(r.serveshow=!0,r.servicedetails="",r.totalCount=0,r.errorMsg="No Service Providers are available over selected Range of Distance")})}},r.detailsPagingAct=function(e,t,o,a){if(console.log(e,t,o,a),""!=a){var n=a.split("-");console.log(n),l.get(c+"/services/"+s.sid+"/"+r.loggedInUserPincode+"/"+n[0]+"/"+n[1]+"?pageNumber="+e+"&pageSize=5").then(function(e){console.log(e),r.servicedetails=e.data.responseData,r.getStars=function(e){return parseFloat(e)/5*100+"%"},r.totalCount=e.data.paginationData.totalCount})}},jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").directive("starRating",function(){return{restrict:"A",template:'<i class="fa fa-star" ng-repeat="star in stars" ng-class="star" aria-hidden="true"></i>',scope:{ratingValue:"=",max:"=",onRatingSelected:"&"},link:function(o,e,t){o.toggle=function(e){o.ratingValue=e+1,o.onRatingSelected({rating:e+1})},o.$watch("ratingValue",function(e,t){isNaN(t)||function(){o.stars=[];for(var e=0;e<o.max;e++)o.stars.push({disabled:e>o.ratingValue}),e==o.ratingValue&&(o.stars[e].disabled=!0)}()})}}}),angular.module("newapp").controller("TodaydealsCtrl",["$scope","$http","$location","resturl",function(n,r,e,l){n.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],null!=localStorage.loggedInUser?(n.loggedInUser=localStorage.loggedInUser,n.loggedInUserName=localStorage.loggedInUserName,n.userlogged=!0):n.userlogged=!1,n.mouseOver=function(e){n.set_bg=function(){return n.bgimg=e.imageURL,{"background-image":"url(/clients/onesevenhome/img/"+n.bgimg+".jpg)"}}},n.logout=function(){localStorage.clear(),e.path("/login")},n.myProfile=function(){e.path("/myaccount")},null==localStorage.loggedInuserId?(n.showSignUp=!0,console.log(n.showSignUp)):n.showSignUp=!1,r.get(l+"/getAllCategories").then(function(e){console.log(e),n.menuitem=e.data.categoryData}),r.get(l+"/getRecommendedProduct").then(function(e){console.log(e),n.recommend=e.data.recommendedProducts,n.RecomendLoaded=!0,n.slickrecommendedprocutsConfig={dots:!1,arrows:!1,infinite:!0,slidesToShow:1,slidesToScroll:1}}),n.todaycat=function(o,e,t){n.title=t.title,console.log(n.title),angular.forEach(e,function(e,t){o!=t&&(e.checked=!1)})};var a={status:1};console.log(a),r.post(l+"/getTodaysDeals?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount}),n.page=1,n.PagingAct=function(e,t,o){r.post(l+"/getTodaysDeals?pageNumber="+e+"&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})},n.todaycat=function(o,e,t){n.title=t.title,console.log(n.title),angular.forEach(e,function(e,t){o!=t&&(e.checked=!1)});var a={status:1,categoryCode:n.title};console.log(a),r.post(l+"/getTodaysDealsForCat?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount,n.page=1,n.PagingAct=function(e,t,o){r.post(l+"/getTodaysDealsForCat?pageNumber="+e+"&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})}})},n.active=function(){var a={status:1,category:n.title};console.log(a),r.post(l+"/getTodaysDeals?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount}),n.page=1,n.PagingAct=function(e,t,o){r.post(l+"/getTodaysDeals?pageNumber="+e+"&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})},n.todaycat=function(o,e,t){n.title=t.title,console.log(n.title),angular.forEach(e,function(e,t){o!=t&&(e.checked=!1)});var a={status:0,category:n.title};console.log(a),r.post(l+"/getTodaysDeals?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})}},n.Expired=function(){var a={status:0,category:n.title};console.log(a),r.post(l+"/getTodaysDeals?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount}),n.page=1,n.PagingAct=function(e,t,o){r.post(l+"/getTodaysDeals?pageNumber="+e+"&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})},n.todaycat=function(o,e,t){n.title=t.title,console.log(n.title),angular.forEach(e,function(e,t){o!=t&&(e.checked=!1)});var a={status:0,categoryCode:n.title};console.log(a),r.post(l+"/getTodaysDealsForCat?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount,n.page=1,n.PagingAct=function(e,t,o){r.post(l+"/getTodaysDealsForCat?pageNumber="+e+"&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})}})}},n.Upcoming=function(e){var a={status:2};console.log(a),r.post(l+"/getTodaysDeals?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount}),n.page=1,n.PagingAct=function(e,t,o){r.post(l+"/getTodaysDeals?pageNumber="+e+"&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})},n.todaycat=function(o,e,t){n.title=t.title,console.log(n.title),angular.forEach(e,function(e,t){o!=t&&(e.checked=!1)});var a={status:2,categoryCode:n.title};console.log(a),r.post(l+"/getTodaysDealsForCat?pageNumber=1&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount,n.page=1,n.PagingAct=function(e,t,o){r.post(l+"/getTodaysDealsForCat?pageNumber="+e+"&pageSize=15",a).then(function(e){console.log(e),n.deal=e.data.todaysDealsData,n.totalCount=e.data.paginationData.totalCount})}})}},r.get(l+"/getRecentBought").then(function(e){console.log(e),n.recently=e.data.recentlyBought,n.RecentlyLoaded=!0,n.slickrecentbroughtConfig={dots:!1,arrows:!1,infinite:!0,slidesToShow:4,slidesToScroll:1,autoplay:!0,autoplayspeed:500,responsive:[{breakpoint:1024,settings:{arrows:!1,centerMode:!0,centerPadding:"0px",slidesToShow:3,slidesToScroll:1}},{breakpoint:800,settings:{arrows:!1,centerMode:!0,centerPadding:"0px",slidesToShow:2,slidesToScroll:1}},{breakpoint:767,settings:{arrows:!1,centerMode:!0,centerPadding:"0px",slidesToShow:1,slidesToScroll:1}}]}}),r.get(l+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),n.cartlist=e.data,console.log(n.cartlist),null==e.data.shoppingCartItems?n.lengthofcart=0:n.lengthofcart=e.data.shoppingCartItems.length}),jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]),angular.module("newapp").controller("ProductpageCtrl",["$scope","$http","$location","$routeParams","resturl",function(r,a,o,n,l){r.typeOfSearch=[{name:"Category",value:"Category"},{name:"Brand",value:"Brand"},{name:"Product",value:"Product"}],null!=localStorage.loggedInUser?(r.loggedInUser=localStorage.loggedInUser,r.loggedInUserName=localStorage.loggedInUserName,r.loggedInuserId=localStorage.loggedInuserId,r.userlogged=!0):r.userlogged=!1,r.logout=function(){localStorage.clear(),o.path("/login")},r.myProfile=function(){o.path("/myaccount")},a.get(l+"/getAllCategories").then(function(e){console.log(e),r.menuitem=e.data.categoryData}),a.get(l+"/products/"+n.prodid).then(function(e){if(console.log(e),r.ppage=e.data,r.page=e.data.discountPercentage,r.pagedescription=e.data.productDescription,r.offerPrice=e.data.productDiscountPrice,r.mainPrice=e.data.productOriginalPrice,r.pointDescription=e.data.productDescTitle,console.log(r.page),r.showPrice=!0,0!=r.page&&null!=r.page&&r.offerPrice!=r.mainPrice||(r.showPrice=!1,r.originalPriceValue=!0),null!=r.pointDescription){r.showDescPoints=!0,r.array=[];for(var t=r.pointDescription.split("#"),o=0;o<t.length;o++){var a={},n=t[o].split("*");a[".title"]=n[0],a[".value"]=n[1],r.array.push(a)}console.log(r.array)}else r.showDescPoints=!1}),a.get(l+"/products/"+n.prodid+"/reviews?pageNumber=1&pageSize=5").then(function(e){console.log(e),r.prod=e.data.reviewList,r.totalCount=e.data.paginationData.totalCount,r.averagereview=e.data.avgReview,console.log(r.averagereview),r.userRatings=e.data.reviewList,console.log(r.userRatings),r.totalreview=e.data.totalratingCount,r.uptotalCount=e.data.paginationData.totalCount,r.ratings=[{number:r.averagereview}]}),r.page=1,r.PagingAct=function(e,t,o){a.get(l+"/products/"+n.prodid+"/reviews?pageNumber="+e+"&pageSize=5").then(function(e){console.log(e),r.prod=e.data.reviewList,r.totalCount=e.data.paginationData.totalCount,r.averagereview=e.data.avgReview,console.log(r.averagereview),r.userRatings=e.data.reviewList,console.log(r.userRatings),r.totalreview=e.data.totalratingCount,r.ratings=[{number:r.averagereview}]})},r.getStars=function(e){return parseFloat(e)/5*100+"%"},0==r.userlogged?r.showReview=!1:(r.showReview=!0,r.onItemRating=function(e){r.starValue=e,console.log(r.starValue)},r.submitReview=function(t){var e={userId:r.loggedInuserId,productId:n.prodid,rating:r.starValue,description:t.description,descriptionName:r.loggedInUserName};console.log(e),a.post(l+"/products/reviews/save",e).then(function(e){console.log(e),a.get(l+"/products/"+n.prodid+"/reviews").then(function(e){console.log(e),r.prod=e.data,r.averagereview=e.data.avgReview,console.log(r.averagereview),r.userRatings=e.data.reviewList,console.log(r.reviewrate),r.totalreview=e.data.totalRatingCount,r.ratings=[{number:r.averagereview}]}),1==e.data.status?(r.successMsg=e.data.message,$(".successPopup").modal("show")):(r.failureMsg=e.data.message,$(".errorPopup").modal("show")),r.firstRate=0,r.secondRate=0,r.readOnly=!0,t.description=""})}),null!=localStorage.loggedInUser?a.get(l+"/pincodeWiseVendors/"+n.prodid+"?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),null==e.data.vendorsDataForProduct?r.imgshow=!1:r.imgshow=!0,r.pagep=e.data.vendorsDataForProduct,null==e.data.vendorsDataForProduct&&(r.err=!0,r.msg=!1,r.successmsg=e.data.status,console.log(r.successmsg)),console.log(r.pagep),r.productpageLoaded=!0,e.data.vendorsDataForProduct.length<10?r.slickproductpageConfig={slidesToShow:5,slidesToScroll:5,prevNext:!0,arrows:!1,dots:!0,autoplay:!0,autoplayspeed:600}:r.slickproductpageConfig={dots:!0,slidesPerRow:5,rows:2,responsive:[{breakpoint:478,settings:{slidesPerRow:1,rows:1}}]}}):(r.msg=!0,r.err=!1,r.msg="Please login to view vendor(s) in your location (or) search for vendor(s) using Pincode...",console.log(r.msg)),r.updateSelection=function(o,e,t){if(console.log(t.userId),r.vendorIdValue=t.vendorId,console.log(r.vendorIdValue),$(".vendorCheck").is(":checked"))$("#del_event").removeAttr("disabled");else r.id=$("#del_event").attr("disabled","disabled");angular.forEach(e,function(e,t){o!=t&&(e.checked=!1)})},r.addcart=function(e){if(0==r.userlogged)console.log(r.userlogged),console.log("Not Logged"),o.path("/login");else{var t={productId:n.prodid,quantity:e,vendorId:r.vendorIdValue};console.log(t),a.post(l+"/cart/addShoppingCartItem?userId="+localStorage.loggedInuserId,t).then(function(e){console.log(e),r.cartvalue=e.data.cartQuantity,console.log(r.cartvalue),a.get(l+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),r.cartlist=e.data,r.lengthofcart=e.data.shoppingCartItems.length,console.log(r.lengthofcart)})})}},a.get(l+"/getRecommendedProduct").then(function(e){console.log(e),r.recommend=e.data.recommendedProducts,r.RecomendLoaded=!0,r.slickrecommendedprocutsConfig={dots:!1,arrows:!1,infinite:!0,slidesToShow:4,slidesToScroll:1,autoplay:!0,autoplayspeed:500}}),a.get(l+"/getRecentBought").then(function(e){console.log(e),r.recently=e.data.recentlyBought,r.RecentlyLoaded=!0,r.slickrecentbroughtConfig={dots:!1,arrows:!1,infinite:!0,slidesToShow:4,slidesToScroll:1,autoplay:!0,autoplayspeed:500,responsive:[{breakpoint:1024,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:3,slidesToScroll:1}},{breakpoint:800,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:2,slidesToScroll:1}},{breakpoint:767,settings:{arrows:!1,centerMode:!0,centerPadding:"40px",slidesToShow:1,slidesToScroll:1}}]}}),localStorage.loggedInuserId,a.get(l+"/cart/displayCart?userId="+localStorage.loggedInuserId).then(function(e){console.log(e),r.cartlist=e.data,console.log(r.cartlist),null==e.data.shoppingCartItems?r.lengthofcart=0:r.lengthofcart=e.data.shoppingCartItems.length}),r.vendorPopInfo=function(e){r.vendorDetails={imagePath:e.vendorImageURL,address:e.vendorOfficeAddress,name:e.vendorName,mobileNum:e.vendorMobile,teleNum:e.vendorTelephone,email:e.email,firmInfo:e.vendorConstFirm}},r.getpincode=function(e){r.postalCode=e,console.log(r.postalCode),a.get(l+"/seachPincodeWiseVendors/"+n.prodid+"?postalCode="+r.postalCode).then(function(e){console.log(e),null==e.data.vendorsDataForProduct?r.imgshow=!1:r.imgshow=!0,r.postalCode="",console.log(r.pagep),r.err=!1,null==e.data.vendorsDataForProduct?(r.err=!0,r.msg=!1,r.successmsg=e.data.status):(r.err=!1,r.msg=!1,r.pagep=e.data.vendorsDataForProduct,r.productpageLoaded=!0,e.data.vendorsDataForProduct.length<5?r.slickproductpageConfig={slidesToShow:5,slidesToScroll:5,prevNext:!0,arrows:!1,dots:!0,autoplay:!0,autoplayspeed:600}:r.slickproductpageConfig={dots:!0,slidesPerRow:5,rows:2,responsive:[{breakpoint:478,settings:{slidesPerRow:1,rows:1}}]})})},jQuery(window).scroll(function(){50<=jQuery(this).scrollTop()?jQuery("#return-to-top").fadeIn(200):jQuery("#return-to-top").fadeOut(200)}),jQuery("#return-to-top").click(function(){jQuery("body,html").animate({scrollTop:0},500)})}]);